---
layout: post
title: 作用域链 垃圾回收机制 学习笔记
date: 2017-07-29
categories: blog
tags: [study,note,作用域链,垃圾回收机制]
description: 作用域链、垃圾回收机制
---

## 作用域链
>保证对执行环境有权访问的所有变量和函数的有序访问

>环境是函数，则其中活动对象作为变量对象,活动对象最开始的时候只包含一个变量，即argument对象

>链最前端是当前执行代码所在环境的变量对象， 作用域链中下一个变量对象都是来自下一个包含环境，一直到全局执行环境

标识符解析：

>沿着作用于一级一级的搜索标识符，始终从最前端开始，直到找到当前标识符，找不到会导致错误发生

	example:
	var color = "blue";
	function changeColor(){
		if(color == "blue"){
			color = "red";
		}else{
			color = "blue";
		}
	}
	changeColor();
	alert("Color is now "+color);

没有块级作用域，在全局执行环境中的 if(){} for(){} 中var 定义变量都直接添加至全局环境中
函数中直接使用未申明的变量，使用未申明变量会在全局环境中申请一个全局变量

## 垃圾回收机制

1.标记清除(最常用的垃圾回收方法)，对所有变量加上标记，去掉环境中的变量，以及环境中的变量引用的变量，加上被标记的变量视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了，最后垃圾收集器完成内存清除，销毁带标记的值并且回收所占用的内存空间。

2.引用计数(因循环引用导致无法回收废弃) 跟踪记录每个只被引用的次数，当一个引用类型值赋给一个申明的变量的时候，引用次数为1，如果同一个只又被赋给另一个变量，引用次数+1，当这个引用变量又取得了另一个值引用次数-1，为0的时候表示无法访问这个值了就进行回收。

>消除循环引用、解除引用的方式是将其值设置为null  

>ps:解除引用不意味着自动回收，自动回收是由垃圾收集器下次运行回收。
